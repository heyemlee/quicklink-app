# 后台管理改进说明

## 更新概述

本次更新优化了后台管理系统，提供了更直观的可视化配置界面。

## 主要改进

### 1. 删除 Logo URL 字段 ✅

- ✅ 从数据库schema中删除了 `logoUrl` 字段
- ✅ 从后台管理"基本信息"标签页中删除了Logo URL输入框
- ✅ 从Header组件中删除了logo显示功能
- ✅ 网页端的tab不再显示logo

### 2. 可视化平台选择器 ✅

在"显示设置"标签页中新增了两个可视化平台选择模块：

#### **关注模块 - 平台选择**

- 展示所有可用的社交媒体平台（Website、TikTok、Instagram、Facebook、WeChat、小红书）
- 每个平台显示其官方logo图标
- 点击即可选择/取消选择
- 选中的平台显示紫色边框和勾选标记
- 支持多选，灵活控制显示哪些平台

#### **评价模块 - 平台选择**

- 展示所有可用的评价平台（小红书、Yelp、Google、Instagram）
- 每个平台显示其官方logo图标
- 点击即可选择/取消选择
- 选中的平台显示粉色边框和勾选标记
- 支持多选，灵活控制显示哪些平台

### 3. 改进的用户界面

**显示设置标签页重新设计：**

- 分为三个部分：基本模块显示、关注模块平台选择、评价模块平台选择
- 基本模块以灰色卡片形式展示，更易识别
- 平台选择器采用网格布局，响应式设计
- 每个平台卡片包含：
  - 彩色圆形背景（对应平台品牌色）
  - 白色圆形容器内的平台logo
  - 平台名称
  - 选中状态的视觉反馈

## 技术实现

### 数据库层面

- 新增 `followPlatforms` 字段（JSON字符串数组）
- 新增 `reviewPlatforms` 字段（JSON字符串数组）
- 删除 `logoUrl` 字段

### API层面

- 更新 `/api/profile` GET和PUT方法以处理新字段
- 更新 `/api/profile/[slug]` GET方法返回平台配置
- 自动解析JSON字段为数组格式

### 前端层面

- Dashboard页面新增 `togglePlatform` 函数处理平台选择
- 导入 `platformsConfig` 获取所有可用平台
- 使用 `Image` 组件优化平台logo加载
- 卡片页面根据配置动态过滤显示的平台

## 使用方法

1. 登录后台管理系统
2. 进入"显示设置"标签页
3. 首先选择要显示哪些基本模块（联系信息、关注模块、评价模块）
4. 如果启用了关注模块，可以选择要显示的社交平台
5. 如果启用了评价模块，可以选择要显示的评价平台
6. 点击"保存更改"按钮
7. 使用"预览名片"按钮查看效果

## 默认配置

新用户或现有用户的默认配置：

**关注平台（默认全选）：**

- Website (KABI官网)
- TikTok
- Instagram
- Facebook
- WeChat
- 小红书

**评价平台（默认全选）：**

- 小红书
- Yelp
- Google
- Instagram

## 视觉特点

- 关注平台选择器使用紫色主题（对应品牌主色调）
- 评价平台选择器使用粉色主题（对应品牌次要色调）
- 平滑的hover和点击动画效果
- 响应式布局，适配各种屏幕尺寸
- 清晰的选中状态视觉反馈

## 兼容性

- 所有现有数据保持不变（除logoUrl字段）
- 平台配置向后兼容
- 如果未设置平台配置，使用默认值
- API自动处理JSON序列化和反序列化

## 下一步

数据库连接可用后，请运行数据库迁移：

```bash
npx prisma db push
```

详细说明请查看 `DATABASE_MIGRATION_INSTRUCTIONS.md`
